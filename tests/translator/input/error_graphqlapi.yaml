Transform: AWS::Serverless-2016-10-31
Resources:
  NoAuthAPI:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      XrayEnabled: true
      Tags:
        Key1: Value1
        Key2: Value2

  NoSchemaPropertiesAPI:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      XrayEnabled: true
      Auth:
        Type: AWS_IAM
      Tags:
        key1: value1
        key2: value2

  BothSchemaInlineAndUriAPI:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      SchemaUri: https://bucket-name.s3.region-code.amazonaws.com/key-name
      XrayEnabled: true
      Auth:
        Type: AWS_IAM
      Tags:
        key1: value1
        key2: value2

  GraphQLApiInvalidFieldInLogging:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      XrayEnabled: true
      Auth:
        Type: AWS_IAM
      Tags:
        key1: value1
        key2: value2
      Logging:
        CloudWatchLogsRoleArn: some-arn
        FieldLogLevel: ERROR
        ExcludeVerboseContent: true
        NotSupposedToBeHere: yo

  DataSourceNoServiceRoleArnOrTableArn:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      Name: SomeApi
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      XrayEnabled: true
      Auth:
        Type: AWS_IAM
      Tags:
        key1: value1
        key2: value2
      DynamoDBDataSources:
        MyDataSource:
          TableName: some-table

  IdDefinedWithOtherProperties:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      Name: SomeApi
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      Auth:
        Type: AWS_IAM
      Functions:
        IdNotMutuallyExclusive:
          Id: some-id
          DataSource: some-datasource

  NoInlineCodeOrCodeUriDefined:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      Name: SomeApi
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      Auth:
        Type: AWS_IAM
      Functions:
        NoCodeProperties:
          DataSource: some-datasource

  BothInlineCodeAndCodeUriDefined:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      Name: SomeApi
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      Auth:
        Type: AWS_IAM
      Functions:
        BothCodeProperties:
          DataSource: some-datasource
          InlineCode: blahblahblah
          CodeUri: MyCodeUri
          Runtime:
            Name: some-name
            Version: 1.2.3

  InlineCodeWithoutRuntime:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      Name: SomeApi
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      Auth:
        Type: AWS_IAM
      Functions:
        NoRuntime:
          DataSource: some-datasource
          InlineCode: blahblahblah

  DataSourceAndDataSourceName:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      Name: SomeApi
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      Auth:
        Type: AWS_IAM
      Functions:
        BothDataSourceProperties:
          DataSource: some-datasource
          DataSourceName: some-datasource-name
          CodeUri: my-code

  NoDataSourceOrDataSourceName:
    Type: AWS::Serverless::GraphQLApi
    Properties:
      Name: SomeApi
      SchemaInline: |
        type Mutation {
          addTodo(id: ID!, name: String, description: String, priority: Int): Todo
        }
      Auth:
        Type: AWS_IAM
      Functions:
        NoDataSourceProperties:
          CodeUri: my-code
