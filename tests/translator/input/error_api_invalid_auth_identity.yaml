Resources:
  ServerlessApi:
    Type: AWS::Serverless::Api
    Properties:
      StageName: prod
      EndpointConfiguration:
        Type: PRIVATE
        VPCEndpointIds:
        - Ref: APIGatewayVpcEndpoint
      Auth:
        Authorizers:
          CognitoAuthorizer:
            UserPoolArn:
            - Fn::Sub: arn:aws:cognito-idp:${AWS::Region}:${AWS::AccountId}:userpool/${PoolId}
            Identity: CognitoAuthorizationIdentity